{"compress":true,"commitItems":[["ba12fe25-d874-443c-a20b-99d3ba818023",1567143475487,"---\ntitle: Codeforces-1207-F\nthumbnail: /gallery/thumbnails/girl-pick.jpg\ndate: 2019-08-29 21:56:34\ntags: [瞎搞]\ncategories: [数据结构]\n---\n\n## 题目\n\n[题目链接](https://codeforces.com/contest/1207/problem/F)\n\n<!--more-->\n\n## 分析\n\n以前从来没有做过这种问法的题目，觉得很有意思。\n\n本来想的是可不可以把操作转化一下改到线段树上去，结果没有想到，好像也真的不行。\n\n然后就灵光一闪发现当询问的 $x$ ，比较大的时候暴力查询也是跑的飞快，于是就开始想大数据暴力查询。\n\n小数据可以发现直接维护一个二维数组 $sum[x][y]$ 表示答案。\n\n然后大小的分隔本来以为就是 $sqrt(5 \\cdot 10^5)$ ，但其实并不是，因为这道题目并不是传统意义上的**分块**。\n\n而是一种用空间换时间的方法，当 $x$ 比较大的时候我们很难去更新 $sum[x][y]$，也开不了那么大的空间。\n\n思考一下，假如分割点是 $p$，那么对于更新操作来说，因为我们需要更新所有的 $sum[x][y]$ 以便查询小数据。\n\n所以更新的复杂度就是：$O(p)$。\n\n对于查询操作来说：如果查询的 $x \\leq p$ ，那么我们可以直接输出答案也就是 $O(1)$。\n\n如果查询的 $ x > p$，那么我们可以暴力查询，复杂度是：$O(\\frac{5\\cdot 10^5}{x})$。具体复杂度是：$\\Omega(\\frac{5\\cdot 10^5}{p}) - O(1)$。\n\n分析一下 $p$ 取 300~1000 都是可以的。\n\n## 代码\n\n~~~c++\n#include <bits/stdc++.h>\n#define rep(i, a, b) for(int i = (a); i <= (b); ++i)\n#define per(i, a, b) for(int i = (a); i >= (b); --i)\nusing namespace std;\n\ntypedef long long ll;\nconst int mod = 1e9+7;\nconst int MAXN = 5e5 + 7;\n\nint a[MAXN];\nint sum[1001][1001];\nint main(int argc, char const *argv[])\n{\n\tint q;\n\tscanf(\"%d\", &q);\n\tint op, x, y;\n\twhile(q--){\n\t\tscanf(\"%d %d %d\", &op, &x, &y);\n\t\tif(op == 1){\n\t\t\ta[x] += y;\n\t\t\tfor(int i = 1; i <= 1000; ++i){\n\t\t\t\tsum[i][x%i] += y;\n\t\t\t}\n\t\t} else {\n\t\t\tif(x <= 1000){\n\t\t\t\tprintf(\"%d\\n\", sum[x][y]);\n\t\t\t} else {\n\t\t\t\tint res = 0;\n\t\t\t\twhile(y <= 500000){\n\t\t\t\t\tres += a[y];\n\t\t\t\t\ty += x;\n\t\t\t\t}\n\t\t\t\tprintf(\"%d\\n\", res);\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}\n~~~\n\n",[[1567143452473,["Dicer@Ghost",[[1,210,"$$\nx = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}\n$$\n\n"]],[209,209],[254,254]]],[1567143454606,["Dicer@Ghost",[[-1,210,"$$\nx = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}\n$$\n\n"]],[254,254],[209,209]]],[1567143504821,["Dicer@Ghost",[[1,209,"$x = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}$"]],[209,209],[247,247]]],[1567143509171,["Dicer@Ghost",[[-1,209,"$x = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}$"]],[247,247],[209,209]]]],null,"Dicer@Ghost"]]}